# Documentation for the `sas_dataset_json` package.
  
----------------------------------------------------------------
 
 *sas_dataset_json--Provides various macros related to support bi-directional conversion between Dataset-JSON forma(version 1.1)t and SAS datasets.* 
  
----------------------------------------------------------------
 
### Version information:
  
- Package: sas_dataset_json
- Version: 0.1.0
- Generated: 2025-05-22T08:23:31
- Author(s): Yutaka Morioka(sasyupi@gmail.com)
- Maintainer(s): Yutaka Morioka(sasyupi@gmail.com)
- License: MIT
- File SHA256: `F*65B1592B52BA908A2021539550B043FA4C2311C2E564A52D0BAE002FF3B90884` for this version
- Content SHA256: `C*2C5E51E958F555508726A1559AB99259FE6DF89759A904BA7653C662837FB904` for this version
  
---
 
# The `sas_dataset_json` package, version: `0.1.0`;
  
---
 
sas_dataset_json is a SAS macro package designed to support bi-directional conversion between CDISC-compliant dataset-JSON format and SAS datasets. 
Key Features:

Export SAS datasets to dataset-JSON

Automatically extracts metadata such as labels, data types, lengths, and formats

Supports SAS Extended Attributes to override default metadata values
(e.g., dataType, displayFormat, label, targetDataType, etc.)

Outputs in strict compliance with dataset-JSON v1.1

Import dataset-JSON into SAS datasets

Parses metadata and records from JSON to reconstruct SAS datasets

  
---
 
  
---
 
Required SAS Components: 
  - Base SAS Software(9.4 and above)
  
---
 
 
--------------------------------------------------------------------
 
*SAS package generated by SAS Package Framework, version `20241207`*
 
--------------------------------------------------------------------
 
# The `sas_dataset_json` package content
The `sas_dataset_json` package consists of the following content:
 
1. [`mylib1` libname ](#mylib1-libname-1 )
2. [`adsl` data ](#adsl-data-2 )
3. [`%m_sas_to_json1_1()` macro ](#msastojson11-macros-3 )
  
 
4. [License note](#license)
  
---
 
## `mylib1` libname <a name="mylib1-libname-1"></a> ######

Create mylib library under work directory.

  
---
 
## `adsl` data <a name="adsl-data-2"></a> ######

[Sample data] dummy-adsl

  
---
 
## `%m_sas_to_json1_1()` macro <a name="msastojson11-macros-3"></a> ######

Macro Name    : %m_sas_to_json1_1
  Description   : Exports a SAS dataset to Dataset-JSON 
                  format (version 1.1). This macro is designed to
                  support clinical data interchange by generating

  Purpose       : 
    - To convert a SAS dataset into a structured Dataset-JSON format(version 1.1) .
    - Automatically extracts metadata such as labels, data types, formats,
      and extended attributes if defined.
    - Generates a metadata-rich datasetJSON with customizable elements.

  Input Parameters:
    outpath               : Path to output directory (default: WORK directory).
    library               : Library reference for input dataset (default: WORK).
    dataset               : Name of the input dataset (required).
    pretty                : Whether to pretty-print the JSON (Y/N, default: Y).
    originator            : Organization or system creating the file (optional).
    fileOID               : File OID to uniquely identify the JSON (optional).
    studyOID              : Study OID used in the Define-XML reference (optional).
    metaDataVersionOID    : Metadata version OID (optional).
    sourceSystem_name     : Source system name (default: SAS on &SYSSCPL.).
    sourceSystem_version  : Source system version (default: from &SYSVLONG).

  Features:
    - Automatically detects and prioritizes extended attributes for variables.
    - Adds sequential record identifiers (ITEMGROUPDATASEQ).
    - Captures dataset-level metadata such as label and last modified date.
    - Outputs structured "columns" and "rows" sections per dataset-JSON v1.1.0.

  Dependencies:
    - Requires access to `sashelp.vxattr`, `sashelp.vcolumn`, and `sashelp.vtable`.
    - Uses PROC JSON, PROC SQL, PROC CONTENTS, and extended attribute inspection.

  Notes:
    - Extended variable attributes (label, type, format, etc.) override defaults.
    - All variables are output with detailed metadata including data types,
      display formats, and lengths.
    - Output file is saved as "&outpath.\&dataset..json".

  Example Usage:

- [case 1] default, simple use
%m_sas_to_json1_1(outpath =/project/json_out,
                 library = adam,
                 dataset = adsl,
                 pretty = Y
);

- [case 2] setting dataset-level metadata
    %m_sas_to_json1_1(
      outpath=/project/json_out,
      library=SDTM,
      dataset=AE,
      pretty=Y,
      originator=ABC Pharma,
      fileOID=http://example.org/studyXYZ/define,
      studyOID=XYZ-123,
      metaDataVersionOID=MDV.XYZ.1.0,
      sourceSystem_name=SAS 9.4,
      sourceSystem_version=9.4M7
    );

- [case 3] set metadata by SAS extended attribute
proc datasets nolist;                             
   modify adsl;     
   xattr add ds originator="X corp."
                    fileOID="www.cdisc.org/StudyMSGv2/1/Define-XML_2.1.0/2024-11-11/"
          					studyOID="XX001-001"
          					metaDataVersionOID="MDV.MSGv2.0.SDTMIG.3.4.SDTM.2.0"
                    sourceSystem_name="SASxxxx"
                    sourceSystem_version="9.4xxxx"
	;  
   xattr add var 
                    STUDYID (label="Study Identifier"
                                 dataType="string"
                                 length=8
                                 keySequence=1) 
                    USUBJID (label="Unique Subject Identifier"
                                 dataType="string"
                                 length=7
                                 keySequence=2) 
                    RFSTDTC (label="Subject Reference Start Date/Time"
                                 dataType="date")
                    AGE (label="Age"
                           dataType="integer"
                           length=2)
                    TRTSDT (label="Date of First Exposure to Treatment"
                           dataType="date"
                           targetDataType="integer"
                           displayFormat="E8601DA.")

 ;

; 
run;
quit;
 %m_sas_to_json1_1(outpath = /project/json_out,
                 library = WORK,
                 dataset = adsl,
                 pretty = Y
);

 Required SAS 9.4 and above

  Author         : [Yutaka Morioka]
  Created Date   : [2025-05-22]
  Version        : 0.10
  License        : MIT License

  
---
 
  
---
 
# License <a name="license"></a> ######
 
	Copyright (c) [2025] [Yutaka Morioka]

  Permission is hereby granted, free of charge, to any person obtaining a copy  
  of this software and associated documentation files (the "Software"), to deal 
  in the Software without restriction, including without limitation the rights  
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell     
  copies of the Software, and to permit persons to whom the Software is         
  furnished to do so, subject to the following conditions:                      
                                                                                
  The above copyright notice and this permission notice shall be included       
  in all copies or substantial portions of the Software.                        
                                                                                
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR    
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,      
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE   
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER        
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, 
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE 
  SOFTWARE.
  
---
 
